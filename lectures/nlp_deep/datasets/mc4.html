

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>mC4 Dataset &#8212; ἐντελέχεια.άι</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-examples.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster.custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster.bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-shadow.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-punk.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-noir.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-light.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-borderless.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/micromodal.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../../../_static/tabs.js"></script>
    <script src="../../../_static/js/hoverxref.js"></script>
    <script src="../../../_static/js/tooltipster.bundle.min.js"></script>
    <script src="../../../_static/js/micromodal.min.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-BQJE5V9RK2"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-BQJE5V9RK2');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lectures/nlp_deep/datasets/mc4';</script>
    <link rel="canonical" href="https://lecture.entelecheia.ai/lectures/nlp_deep/datasets/mc4.html" />
    <link rel="shortcut icon" href="https://assets.entelecheia.ai/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Lab: Exploratory Data Analysis (EDA)" href="lab-eda.html" />
    <link rel="prev" title="Datasets" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content"><p>
  <strong>Announcement:</strong>
  You can install the accompanying AI tutor <a href="https://chrome.google.com/webstore/detail/lecturebot-for-%E1%BC%90%CE%BD%CF%84%CE%B5%CE%BB%CE%AD%CF%87%CE%B5%CE%B9%CE%B1/lfgfgbomindbccgidgalhhndggddpagd" target="_blank">here</a>.
  <a class="reference external" href="https://chrome.google.com/webstore/detail/lecturebot-for-%E1%BC%90%CE%BD%CF%84%CE%B5%CE%BB%CE%AD%CF%87%CE%B5%CE%B9%CE%B1/lfgfgbomindbccgidgalhhndggddpagd" target="_blank"><img alt="chrome-web-store-image" src="https://img.shields.io/chrome-web-store/v/lfgfgbomindbccgidgalhhndggddpagd" /></a>
</p>
</div>
  </div>

  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    <p class="title logo__title">ἐντελέχεια.άι</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Course</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../nlp_intro/index.html">Introduction to NLP</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../nlp_intro/intro/index.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nlp_intro/research/index.html">Research Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nlp_intro/lm/index.html">Language Models</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../nlp_intro/datasets/index.html">Datasets</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/datasets/corpus.html">Text Data Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/datasets/lab-dart.html">Lab: Crawling DART Data</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../nlp_intro/topic/index.html">Topic Modeling</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/topic/methods.html">Topic Modeling Methodologies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/topic/practice.html">Topic Modeling in Practice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/topic/coherence.html">Topic Coherence Measures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/topic/coherence-practice.html">Topic Coherence in Practice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/topic/tomotopy.html">Lab: Tomotopy</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../nlp_intro/sentiments/index.html">Sentiment Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/sentiments/lexicon.html">Lexicon-Based Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/sentiments/ml.html">Machine Learning-Based Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/sentiments/lab-lexicon.html">Lab: Lexicon-based Sentiment Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/sentiments/lab-ml.html">Lab: ML-based Sentiment Classification</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../nlp_intro/tokenization/index.html">Tokenization</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/tokenization/tokenization.html">Understanding the Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/tokenization/pos.html">Part-of-Speech Tagging and Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/tokenization/ngrams.html">N-grams for Tokenization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/tokenization/korean.html">Tokenization in Korean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/tokenization/segmentation.html">Word Segmentation and Association</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/tokenization/lab-tokenization.html">Lab: Tokenization and Pre-processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_intro/tokenization/lab-korean.html">Lab: Korean Text Processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nlp_intro/embeddings/index.html">Word Embeddings</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Deep Learning for NLP</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../llms/index.html">Large Language Models</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../llms/zeroshot.html">Zero Shot and Prompt Engineering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../llms/decoding.html">Decoding and Search Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../llms/plms.html">Pretrained Language Models</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../transformers/index.html">Transformers</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../transformers/bert.html">BERT: Bidirectional Encoder Representations from Transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../transformers/bertviz.html">BERT: Visualizing Attention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../transformers/t5.html">T5: Text-To-Text Transfer Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../transformers/byt5.html">ByT5: Towards a token-free future with pre-trained byte-to-byte models</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">Datasets</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">mC4 Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab-eda.html">Lab: Exploratory Data Analysis (EDA)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tokenization/index.html">Tokenization</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tokenization/subword.html">Subword Tokenization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tokenization/pipeline.html">Tokenization Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tokenization/bpe.html">BPE Step-by-Step Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tokenization/wordpiece.html">WordPiece Step-by-Step Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tokenization/unigram.html">Unigram Step-by-Step Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tokenization/sentencepiece.html">SentencePiece Tokenizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tokenization/lab-train-tokenizers.html">Lab: Training Tokenizers</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../training/index.html">Training Language Models</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../training/lab-pretraining.html">Lab: Pretraining Language Models</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../chatbots/index.html">Conversational AI and Chatbots</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../chatbots/rlhf.html">Reinforcement Learning with Human Feedback (RLHF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../chatbots/detectGPT.html">How to Spot Machine-Written Texts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../nlp_advances/index.html">Advances in AI and NLP</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../nlp_advances/thesis.html">Writing a Thesis</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../nlp_advances/gpt/index.html">Generative Language Models</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_advances/gpt/detectGPT.html">DetectGPT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_advances/gpt/gpt4.html">GPT-4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nlp_advances/gpt/camelids.html">Meet the Camelids: A Family of LLMs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nlp_advances/sam/index.html">Segment Anything</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../aiart/index.html">AI Art (Generative AI)</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../aiart/intro/index.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aiart/brave/index.html">A Brave New World</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aiart/aiart/index.html">Art and Music in Light of AI</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../aiart/text-to-image/index.html">Text-to-Image Models</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../aiart/text-to-image/dalle1.html">DALL·E 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aiart/text-to-image/dalle2.html">DALL·E 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aiart/text-to-image/imagen.html">Imagen</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../aiart/motion-capture-and-synthesis/index.html">Motion Capture and Motion Synthesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aiart/robot/index.html">Robot Drawing System</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../mlops/index.html">Machine Learning Systems Design</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mlops/intro.html">Introduction to MLOps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mlops/project.html">MLOps Project</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mlops/devops/index.html">DevOps</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/devops/gitops.html">GitOps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/devops/devsecops.html">DevSecOps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/devops/llmops.html">LLMOps</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mlops/dotfiles/index.html">Dotfiles</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai">Dotfiles Project</a></li>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai/usage/dotdrop/">Dotdrop Setup</a></li>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai/usage/github/">GitHub Setup</a></li>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai/usage/ssh-gpg-age/">SSH, GPG, and Age Setup</a></li>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai/usage/sops/">SOPS Usage</a></li>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai/usage/pass/">Pass and Passage Usage</a></li>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai/usage/doppler/">Doppler Usage</a></li>
<li class="toctree-l3"><a class="reference external" href="https://dotfiles.entelecheia.ai/usage/dockerfiles/">Dockerfiles Usage</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mlops/security/index.html">Security Management</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/security/auth-enc-sign.html">Authentication, Encryption, and Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/security/age-gpg-ssh.html">SSH, GPG, and AGE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/security/pass.html">Unix Password Managers</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mlops/github/index.html">GitHub Workflow</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/github/fork-pull.html">Github’s Fork &amp; Pull Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/github/template.html">Project Templating Tools</a></li>
<li class="toctree-l3"><a class="reference external" href="https://hyperfast-python.entelecheia.ai/">Hyperfast Python Template</a></li>
<li class="toctree-l3"><a class="reference external" href="https://hyperfast-template.entelecheia.ai/">Hyperfast Template</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mlops/containerization/index.html">Containerization</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/containerization/docker.html">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/containerization/containerd.html"><code class="docutils literal notranslate"><span class="pre">containerd</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mlops/simple-pipeline/index.html">Simple MLOps Pipeline</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/simple-pipeline/server.html">Server Setup &amp; Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mlops/simple-pipeline/vpn.html">VPN Connectivity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../ds/index.html">Data Science for Economics and Finance</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-24"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ds/fomc/index.html">Textual Analysis of FOMC contents</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-25"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/01_numerical_data.html">Preparing Numerical Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/02_textual_data.html">Preparing Textual Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/03_EDA_numericals1.html">EDA on Numerical Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/03_EDA_numericals2.html">EDA on Numerical Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/04_training_datasets.html">Create Training Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/05_features.html">Visualizing Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/06_AutoML.html">Checking Baseline with AutoML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/07_predict_sentiments.html">Predicting Sentiments of FOMC Corpus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/08_EDA_sentiments1.html">EDA on Sentiments: Correlation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/08_EDA_sentiments2.html">EDA on Sentiment Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/09_visualize_features.html">Visualize Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/10_monetary_shocks.html">Monetary Policy Shocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/fomc/11_AutoML_with_tones.html">Predicting the next decisions with tones</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ds/esg-ratings/index.html">ESG Ratings</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-26"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/prepare_datasets.html">Preparing training datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/improve_datasets.html">Improving classification datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/train_classifiers.html">Training Classifiers for ESG Ratings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/build_news_corpus.html">Building <code class="docutils literal notranslate"><span class="pre">econ_news_kr</span></code> corpus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/predict_esg_classes.html">Predicting ESG Categories and Polarities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/cross_validate_datasets.html">Cross validating datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/prepare_datasets_for_labeling.html">Preparing active learning data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ds/esg-ratings/all_in_one_pipeline.html">Putting them together in a pipeline</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../about/lecture-bot.html">LectureBot for ἐντελέχεια.άι</a></li>
<li class="toctree-l1"><a class="reference external" href="https://entelecheia.me">entelecheia.me</a></li>
<li class="toctree-l1"><a class="reference external" href="https://course.entelecheia.ai">course.entelecheia.ai</a></li>
<li class="toctree-l1"><a class="reference external" href="https://research.entelecheia.ai">research.entelecheia.ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/index.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/lectures/nlp_deep/datasets/mc4.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>mC4 Dataset</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-construction">Dataset Construction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-dataset">Building the Dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-to-related-models">Comparison to Related Models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mbert">mBERT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xlm">XLM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xlm-r">XLM-R</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mbart">mBART</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#marge">MARGE</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-description">Data Description</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-languages">Supported Languages</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-mc4-dataset-with-hugging-face-datasets-library">Using mC4 Dataset with Hugging Face Datasets Library</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mc4-dataset-and-perplexity-sampling">mC4 Dataset and Perplexity Sampling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mc4-sampling">mC4 Sampling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#perplexity-sampling">Perplexity Sampling</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="mc4-dataset">
<h1>mC4 Dataset<a class="headerlink" href="#mc4-dataset" title="Permalink to this heading">#</a></h1>
<p>by <span id="id1">Xue <em>et al.</em> [<a class="reference internal" href="../../../about/index.html#id68" title="Linting Xue, Noah Constant, Adam Roberts, Mihir Kale, Rami Al-Rfou, Aditya Siddhant, Aditya Barua, and Colin Raffel. Mt5: a massively multilingual pre-trained text-to-text transformer. arXiv preprint arXiv:2010.11934, 2020.">2020</a>]</span></p>
<p>The <strong>mC4 dataset</strong> is a multilingual colossal, cleaned version of Common Crawl’s web crawl corpus, which is based on the Common Crawl dataset. The dataset includes 108 languages and is specifically designed to pretrain language models and word representations. This dataset is an extension of the C4 dataset, which was designed to be English-only.</p>
<figure class="align-default" id="fig-mc4">
<a class="reference internal image-reference" href="../../../_images/mc4.png"><img alt="../../../_images/mc4.png" src="../../../_images/mc4.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 119 </span><span class="caption-text">mC4 Dataset</span><a class="headerlink" href="#fig-mc4" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<section id="dataset-construction">
<h2>Dataset Construction<a class="headerlink" href="#dataset-construction" title="Permalink to this heading">#</a></h2>
<p>To build the mC4 dataset, the authors made use of all the 71 monthly web scrapes released so far by Common Crawl, which is dramatically more source data than was used for C4. They used <strong>cld3</strong> to identify over 100 languages and applied several filtering steps, such as line length filter and deduplication, to clean and preprocess the data. After the filtering steps, they grouped the remaining pages by language and included all languages with 10,000 or more pages in the final dataset.</p>
</section>
<section id="building-the-dataset">
<h2>Building the Dataset<a class="headerlink" href="#building-the-dataset" title="Permalink to this heading">#</a></h2>
<p>To build the mC4 dataset, follow these steps:</p>
<ol class="arabic simple">
<li><p>Collect data from the Common Crawl dataset by making use of all 71 monthly web scrapes.</p></li>
<li><p>Use cld3 to identify over 100 languages.</p></li>
<li><p>Apply a line length filter that requires pages to contain at least three lines of text with 200 or more characters.</p></li>
<li><p>Deduplicate lines across documents and remove pages containing bad words.</p></li>
<li><p>Detect each page’s primary language using cld3 and remove those with a confidence below 70%.</p></li>
<li><p>Group the remaining pages by language and include in the corpus all languages with 10,000 or more pages.</p></li>
</ol>
<p>After completing these steps, you’ll have the mC4 dataset, which contains text in 107 languages as defined by cld3.</p>
</section>
<section id="comparison-to-related-models">
<h2>Comparison to Related Models<a class="headerlink" href="#comparison-to-related-models" title="Permalink to this heading">#</a></h2>
<p>Most related models use Wikipedia as their primary source for multilingual data. However, some models, such as XLM-R and mBART, also leverage data from Common Crawl to expand their training dataset. The mC4 dataset, in contrast, focuses on using data from Common Crawl with a more extensive filtering and cleaning process.</p>
<section id="mbert">
<h3>mBERT<a class="headerlink" href="#mbert" title="Permalink to this heading">#</a></h3>
<p>mBERT (Devlin, 2018) is a multilingual version of BERT (Devlin et al., 2019). The primary difference between mBERT and BERT is the training set. While BERT is trained on English Wikipedia and the Toronto Books Corpus, mBERT is trained on up to 104 languages from Wikipedia.</p>
</section>
<section id="xlm">
<h3>XLM<a class="headerlink" href="#xlm" title="Permalink to this heading">#</a></h3>
<p>XLM (Conneau and Lample, 2019) is based on BERT but applies improved methods for pre-training multilingual language models, including explicitly cross-lingual pre-training objectives. The most massively-multilingual variant of XLM was trained on 100 languages from Wikipedia.</p>
</section>
<section id="xlm-r">
<h3>XLM-R<a class="headerlink" href="#xlm-r" title="Permalink to this heading">#</a></h3>
<p>XLM-R (Conneau et al., 2020) is an improved version of XLM based on the RoBERTa model (Liu et al., 2019). XLM-R is trained with a cross-lingual masked language modeling objective on data in 100 languages from Common Crawl. To improve the pre-training data quality, pages from Common Crawl were filtered by an n-gram language model trained on Wikipedia (Wenzek et al., 2020).</p>
</section>
<section id="mbart">
<h3>mBART<a class="headerlink" href="#mbart" title="Permalink to this heading">#</a></h3>
<p>mBART (Liu et al., 2020a) is a multilingual encoder-decoder model based on BART (Lewis et al., 2020b). mBART is trained with a combination of span masking and sentence shuffling objectives on a subset of 25 languages from the same data as XLM-R.</p>
</section>
<section id="marge">
<h3>MARGE<a class="headerlink" href="#marge" title="Permalink to this heading">#</a></h3>
<p>MARGE (Lewis et al., 2020a) is a multilingual encoder-decoder model trained to reconstruct a document in one language by retrieving documents in other languages. It uses data in 26 languages from Wikipedia and CC-News (Liu et al., 2019).</p>
<figure class="align-default" id="fig-mc4-comparison">
<a class="reference internal image-reference" href="../../../_images/mc4-comparison.png"><img alt="../../../_images/mc4-comparison.png" src="../../../_images/mc4-comparison.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 120 </span><span class="caption-text">Comparison of mC4 and other datasets</span><a class="headerlink" href="#fig-mc4-comparison" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="data-description">
<h2>Data Description<a class="headerlink" href="#data-description" title="Permalink to this heading">#</a></h2>
<p>The dataset includes the following fields:</p>
<ul class="simple">
<li><p><strong>url</strong>: URL of the source as a string</p></li>
<li><p><strong>text</strong>: Text content as a string</p></li>
<li><p><strong>timestamp</strong>: Timestamp as a string</p></li>
</ul>
<section id="supported-languages">
<h3>Supported Languages<a class="headerlink" href="#supported-languages" title="Permalink to this heading">#</a></h3>
<p>The mC4 dataset supports 108 languages, including languages written in the Latin script (denoted by “-Latn”).</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-left head"><p>language code</p></th>
<th class="text-left head"><p>language name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>af</p></td>
<td class="text-left"><p>Afrikaans</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>am</p></td>
<td class="text-left"><p>Amharic</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ar</p></td>
<td class="text-left"><p>Arabic</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>az</p></td>
<td class="text-left"><p>Azerbaijani</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>be</p></td>
<td class="text-left"><p>Belarusian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>bg</p></td>
<td class="text-left"><p>Bulgarian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>bg-Latn</p></td>
<td class="text-left"><p>Bulgarian (Latin)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>bn</p></td>
<td class="text-left"><p>Bangla</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ca</p></td>
<td class="text-left"><p>Catalan</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ceb</p></td>
<td class="text-left"><p>Cebuano</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>co</p></td>
<td class="text-left"><p>Corsican</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>cs</p></td>
<td class="text-left"><p>Czech</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>cy</p></td>
<td class="text-left"><p>Welsh</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>da</p></td>
<td class="text-left"><p>Danish</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>de</p></td>
<td class="text-left"><p>German</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>el</p></td>
<td class="text-left"><p>Greek</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>el-Latn</p></td>
<td class="text-left"><p>Greek (Latin)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>en</p></td>
<td class="text-left"><p>English</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>eo</p></td>
<td class="text-left"><p>Esperanto</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>es</p></td>
<td class="text-left"><p>Spanish</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>et</p></td>
<td class="text-left"><p>Estonian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>eu</p></td>
<td class="text-left"><p>Basque</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>fa</p></td>
<td class="text-left"><p>Persian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>fi</p></td>
<td class="text-left"><p>Finnish</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>fil</p></td>
<td class="text-left"><p>Filipino</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>fr</p></td>
<td class="text-left"><p>French</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>fy</p></td>
<td class="text-left"><p>Western Frisian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ga</p></td>
<td class="text-left"><p>Irish</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>gd</p></td>
<td class="text-left"><p>Scottish Gaelic</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>gl</p></td>
<td class="text-left"><p>Galician</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>gu</p></td>
<td class="text-left"><p>Gujarati</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ha</p></td>
<td class="text-left"><p>Hausa</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>haw</p></td>
<td class="text-left"><p>Hawaiian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>hi</p></td>
<td class="text-left"><p>Hindi</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>hi-Latn</p></td>
<td class="text-left"><p>Hindi (Latin script)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>hmn</p></td>
<td class="text-left"><p>Hmong, Mong</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ht</p></td>
<td class="text-left"><p>Haitian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>hu</p></td>
<td class="text-left"><p>Hungarian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>hy</p></td>
<td class="text-left"><p>Armenian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>id</p></td>
<td class="text-left"><p>Indonesian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ig</p></td>
<td class="text-left"><p>Igbo</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>is</p></td>
<td class="text-left"><p>Icelandic</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>it</p></td>
<td class="text-left"><p>Italian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>iw</p></td>
<td class="text-left"><p>former Hebrew</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ja</p></td>
<td class="text-left"><p>Japanese</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ja-Latn</p></td>
<td class="text-left"><p>Japanese (Latin)</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>jv</p></td>
<td class="text-left"><p>Javanese</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ka</p></td>
<td class="text-left"><p>Georgian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>kk</p></td>
<td class="text-left"><p>Kazakh</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>km</p></td>
<td class="text-left"><p>Khmer</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>kn</p></td>
<td class="text-left"><p>Kannada</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ko</p></td>
<td class="text-left"><p>Korean</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ku</p></td>
<td class="text-left"><p>Kurdish</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ky</p></td>
<td class="text-left"><p>Kyrgyz</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>la</p></td>
<td class="text-left"><p>Latin</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>lb</p></td>
<td class="text-left"><p>Luxembourgish</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>lo</p></td>
<td class="text-left"><p>Lao</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>lt</p></td>
<td class="text-left"><p>Lithuanian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>lv</p></td>
<td class="text-left"><p>Latvian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>mg</p></td>
<td class="text-left"><p>Malagasy</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>mi</p></td>
<td class="text-left"><p>Maori</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>mk</p></td>
<td class="text-left"><p>Macedonian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ml</p></td>
<td class="text-left"><p>Malayalam</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>mn</p></td>
<td class="text-left"><p>Mongolian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>mr</p></td>
<td class="text-left"><p>Marathi</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ms</p></td>
<td class="text-left"><p>Malay</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>mt</p></td>
<td class="text-left"><p>Maltese</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>my</p></td>
<td class="text-left"><p>Burmese</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ne</p></td>
<td class="text-left"><p>Nepali</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>nl</p></td>
<td class="text-left"><p>Dutch</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>no</p></td>
<td class="text-left"><p>Norwegian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ny</p></td>
<td class="text-left"><p>Nyanja</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>pa</p></td>
<td class="text-left"><p>Punjabi</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>pl</p></td>
<td class="text-left"><p>Polish</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ps</p></td>
<td class="text-left"><p>Pashto</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>pt</p></td>
<td class="text-left"><p>Portuguese</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ro</p></td>
<td class="text-left"><p>Romanian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ru</p></td>
<td class="text-left"><p>Russian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ru-Latn</p></td>
<td class="text-left"><p>Russian (Latin)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>sd</p></td>
<td class="text-left"><p>Sindhi</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>si</p></td>
<td class="text-left"><p>Sinhala</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>sk</p></td>
<td class="text-left"><p>Slovak</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>sl</p></td>
<td class="text-left"><p>Slovenian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>sm</p></td>
<td class="text-left"><p>Samoan</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>sn</p></td>
<td class="text-left"><p>Shona</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>so</p></td>
<td class="text-left"><p>Somali</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>sq</p></td>
<td class="text-left"><p>Albanian</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>sr</p></td>
<td class="text-left"><p>Serbian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>st</p></td>
<td class="text-left"><p>Southern Sotho</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>su</p></td>
<td class="text-left"><p>Sundanese</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>sv</p></td>
<td class="text-left"><p>Swedish</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>sw</p></td>
<td class="text-left"><p>Swahili</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ta</p></td>
<td class="text-left"><p>Tamil</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>te</p></td>
<td class="text-left"><p>Telugu</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>tg</p></td>
<td class="text-left"><p>Tajik</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>th</p></td>
<td class="text-left"><p>Thai</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>tr</p></td>
<td class="text-left"><p>Turkish</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>uk</p></td>
<td class="text-left"><p>Ukrainian</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>und</p></td>
<td class="text-left"><p>Unknown language</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ur</p></td>
<td class="text-left"><p>Urdu</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>uz</p></td>
<td class="text-left"><p>Uzbek</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>vi</p></td>
<td class="text-left"><p>Vietnamese</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>xh</p></td>
<td class="text-left"><p>Xhosa</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>yi</p></td>
<td class="text-left"><p>Yiddish</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>yo</p></td>
<td class="text-left"><p>Yoruba</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>zh</p></td>
<td class="text-left"><p>Chinese</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>zh-Latn</p></td>
<td class="text-left"><p>Chinese (Latin)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>zu</p></td>
<td class="text-left"><p>Zulu</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="using-mc4-dataset-with-hugging-face-datasets-library">
<h2>Using mC4 Dataset with Hugging Face Datasets Library<a class="headerlink" href="#using-mc4-dataset-with-hugging-face-datasets-library" title="Permalink to this heading">#</a></h2>
<p>You can load the mC4 subset of any language like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datasets</span> <span class="kn">import</span> <span class="n">load_dataset</span>

<span class="n">en_mc4</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;mc4&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And if you want to specify a list of languages:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datasets</span> <span class="kn">import</span> <span class="n">load_dataset</span>

<span class="n">mc4_subset_with_five_languages</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;mc4&quot;</span><span class="p">,</span> <span class="n">languages</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;fr&quot;</span><span class="p">,</span> <span class="s2">&quot;es&quot;</span><span class="p">,</span> <span class="s2">&quot;de&quot;</span><span class="p">,</span> <span class="s2">&quot;zh&quot;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="mc4-dataset-and-perplexity-sampling">
<h2>mC4 Dataset and Perplexity Sampling<a class="headerlink" href="#mc4-dataset-and-perplexity-sampling" title="Permalink to this heading">#</a></h2>
<p>by <span id="id2">De la Rosa <em>et al.</em> [<a class="reference internal" href="../../../about/index.html#id69" title="Javier De la Rosa, Eduardo G Ponferrada, Paulo Villegas, Pablo Gonzalez de Prado Salas, Manu Romero, and Marıa Grandury. Bertin: efficient pre-training of a spanish language model using perplexity sampling. arXiv preprint arXiv:2207.06814, 2022.">2022</a>]</span></p>
<p>The mC4 dataset, derived from web-crawled data, presents a massive amount of multilingual text, making training language models in constrained environments challenging. To address this issue, we explore sampling methods for creating subsets of the mC4 dataset that enable the training of language models with a reduced data size while maintaining adequate training effectiveness.</p>
<p>A technique called perplexity sampling is employed to construct these subsets. Originating from the construction of CCNet and their high-quality monolingual datasets from web-crawled data, perplexity sampling leverages fast language models trained on high-quality data sources, such as Wikipedia, to filter out texts that deviate significantly from the correct expressions of a language.</p>
<p>Perplexity is calculated for each document in a random subset of the mC4 dataset, extracting their distribution and quartiles. Two functions are then created to oversample the central quarters of the perplexity distribution, aiming to bias against documents with either too small or too large perplexity values. These functions are compared to random sampling to evaluate their effectiveness.</p>
<p>The first function, called the Stepwise function, oversamples the central quarters while subsampling the rest of the distribution. The second function uses a Gaussian-like distribution to weight the perplexity values, smoothing out the sharp boundaries of the Stepwise function and providing a better approximation to the desired underlying distribution.</p>
<p>Parameters of both functions are adjusted to extract a reduced-size subset of documents from the original mC4 dataset, significantly decreasing the raw data size. To ensure proper validation, a separate set of documents is extracted from the training dataset at each evaluation step, excluding those documents from training to avoid validating on previously seen data.</p>
<p>An analysis using t-SNE plots reveals that the distribution is uniform across different topics and clusters of documents. This is crucial because introducing a perplexity-based sampling method could potentially introduce undesired biases if perplexity correlates with some other aspect of the data, such as length. Overall, the perplexity sampling approach allows for the efficient use of resources in training language models without compromising the quality and representation of the dataset.</p>
</section>
<section id="mc4-sampling">
<h2><a class="reference external" href="https://huggingface.co/datasets/bertin-project/mc4-sampling/blob/main/README.md">mC4 Sampling</a><a class="headerlink" href="#mc4-sampling" title="Permalink to this heading">#</a></h2>
<p>The mC4 dataset and perplexity sampling can be used to pretrain language models or word representations for various natural language processing tasks. By leveraging these techniques, you can reduce the amount of data required for training, making it more efficient and resource-friendly.</p>
<section id="perplexity-sampling">
<h3>Perplexity Sampling<a class="headerlink" href="#perplexity-sampling" title="Permalink to this heading">#</a></h3>
<p>To use perplexity sampling for creating subsets of the mC4 dataset, you can refer to the examples provided in the Dataset Summary section for each of the three sampling methods: Random, Gaussian, and Stepwise.</p>
<p>For instance, to use the Gaussian sampling method, you would need to install the <a class="reference external" href="https://kheafield.com/code/kenlm/">KenLM</a> library, download the Kneser-Ney language model for your desired language, and then use the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datasets</span> <span class="kn">import</span> <span class="n">load_dataset</span>

<span class="n">mc4gaussian</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span>
    <span class="s2">&quot;bertin-project/mc4-sampling&quot;</span><span class="p">,</span>
    <span class="s2">&quot;es&quot;</span><span class="p">,</span>
    <span class="n">split</span><span class="o">=</span><span class="s2">&quot;train&quot;</span><span class="p">,</span>
    <span class="n">streaming</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">sampling_method</span><span class="o">=</span><span class="s2">&quot;gaussian&quot;</span><span class="p">,</span>
    <span class="n">perplexity_model</span><span class="o">=</span><span class="s2">&quot;./es.arpa.bin&quot;</span><span class="p">,</span>
    <span class="n">boundaries</span><span class="o">=</span><span class="p">[</span><span class="mf">536394.99320948</span><span class="p">,</span> <span class="mf">662247.50212365</span><span class="p">,</span> <span class="mf">919250.87225178</span><span class="p">],</span>
    <span class="n">factor</span><span class="o">=</span><span class="mf">0.78</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">9</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">mc4gaussian</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
<p>Remember to replace the language code, perplexity model path, and boundaries specific to your language.</p>
<p>By utilizing the mC4 dataset and perplexity sampling techniques, you can effectively train language models on a reduced dataset size while maintaining the quality and representation of the data. This approach allows you to make the most of available resources without compromising the performance of your models.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "entelecheia/lecture",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./lectures/nlp_deep/datasets"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Datasets</p>
      </div>
    </a>
    <a class="right-next"
       href="lab-eda.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab: Exploratory Data Analysis (EDA)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-construction">Dataset Construction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-dataset">Building the Dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-to-related-models">Comparison to Related Models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mbert">mBERT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xlm">XLM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xlm-r">XLM-R</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mbart">mBART</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#marge">MARGE</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-description">Data Description</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-languages">Supported Languages</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-mc4-dataset-with-hugging-face-datasets-library">Using mC4 Dataset with Hugging Face Datasets Library</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mc4-dataset-and-perplexity-sampling">mC4 Dataset and Perplexity Sampling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mc4-sampling">mC4 Sampling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#perplexity-sampling">Perplexity Sampling</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By <a href="https://entelecheia.me" target="_blank">Young Joon Lee</a>
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>